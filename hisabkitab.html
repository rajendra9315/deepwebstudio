<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Personal Accounting System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; padding:20px; }
    h1,h2 { color:#222; }
    .card { background:#fff; padding:16px; border-radius:8px; margin-bottom:20px; box-shadow:0 2px 6px rgba(0,0,0,0.08); }

/* Scrollable report cards */
.card.scroll {
  max-height: 320px; /* ~5 rows visible */
  overflow-y: auto;
}
    input, select, textarea, button { width:100%; padding:8px; margin:6px 0; }
    button { background:#2563eb; color:#fff; border:none; border-radius:6px; cursor:pointer; }
    table { width:100%; border-collapse:collapse; }
    th, td { border:1px solid #ddd; padding:8px; text-align:left; }
    th { background:#f0f0f0; }
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    @media(max-width:768px){ .grid{grid-template-columns:1fr;} }
  </style>
</head>
<body>

<h1>üìò Personal Accounting Web App</h1>
<p>All data is saved locally in your browser (no internet, no tracking).</p>

<div class="card">
  <h2>üìÖ Date Filter</h2>
  <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px">
    <div>
      <label>From Date</label>
      <input type="date" id="fromDate" />
    </div>
    <div>
      <label>To Date</label>
      <input type="date" id="toDate" />
    </div>
    <div>
      <label>Month</label>
      <select id="month">
        <option value="">All</option>
        <option value="0">January</option>
        <option value="1">February</option>
        <option value="2">March</option>
        <option value="3">April</option>
        <option value="4">May</option>
        <option value="5">June</option>
        <option value="6">July</option>
        <option value="7">August</option>
        <option value="8">September</option>
        <option value="9">October</option>
        <option value="10">November</option>
        <option value="11">December</option>
      </select>
    </div>
  </div>
  <button onclick="applyFilter()" style="margin-top:10px">Apply Filter</button>
  <button onclick="clearFilter()" style="background:#6b7280;margin-top:10px">Clear Filter</button>
</div>

<div class="card">
  <h2>Add Transaction</h2>
  
  <label>Date</label>
  <input type="date" id="date" />

  <label>Account</label>
  <select id="account">
    <option>Cash</option>
    <option>Bank</option>
    <option>Capital</option>
    <option>Sales</option>
    <option>Purchase</option>
    <option>Expense</option>
  </select>

  <label>Type</label>
  <select id="type">
    <option value="debit">Debit</option>
    <option value="credit">Credit</option>
  </select>

  <label>Amount</label>
  <input type="number" id="amount" />

  <label>Note</label>
  <textarea id="note"></textarea>

  <button onclick="addTransaction()">Save Transaction</button>
  <button onclick="resetForm()" style="background:#6b7280">Clear</button>
</div>

<div class="grid">
  <div class="card scroll">
    <h2>Journal</h2>
    <table id="journal"></table>
  </div>

  <div class="card scroll">
    <h2>Ledger Summary</h2>
    <table id="ledger"></table>
  </div>
</div>

<div class="grid">
  <div class="card scroll">
    <h2>Trading Account</h2>
    <div id="trading"></div>
  </div>

  <div class="card scroll">
    <h2>Profit & Loss</h2>
    <div id="pl"></div>
  </div>
</div>

<div class="card scroll">
  <h2>Balance Sheet</h2>
  <div id="bs"></div>
</div>

<script>
let data = JSON.parse(localStorage.getItem('accounts')) || [];
let filteredData = [...data];
let editIndex = null;
let editIndex = null;

function addTransaction(){
  const tx = {
    date: date.value,
    account: account.value,
    type: type.value,
    amount: Number(amount.value),
    note: note.value
  };

  if(editIndex !== null){
    data[editIndex] = tx;
    editIndex = null;
  } else {
    data.push(tx);
  }

  localStorage.setItem('accounts', JSON.stringify(data));
  resetForm();
  render();
}

function resetForm(){
  date.value = '';
  amount.value = '';
  note.value = '';
  editIndex = null;
}

function render(){
  renderJournal();
  renderLedger();
  renderReports();
}

function applyFilter(){
  const from = fromDate.value;
  const to = toDate.value;
  const m = month.value;

  filteredData = data.filter(t => {
    let ok = true;
    if(from && t.date < from) ok = false;
    if(to && t.date > to) ok = false;
    if(m !== ''){
      const txMonth = new Date(t.date).getMonth().toString();
      if(txMonth !== m) ok = false;
    }
    return ok;
  });
  render();
}

function clearFilter(){
  fromDate.value = '';
  toDate.value = '';
  month.value = '';
  filteredData = [...data];
  render();
}

function renderJournal(){
  journal.innerHTML = '<tr><th>Date</th><th>Account</th><th>Money In (‚Çπ)</th><th>Money Out (‚Çπ)</th><th>Note</th><th>Action</th></tr>';
  filteredData.forEach((t,i) => {
    const moneyIn = t.type === 'credit'
      ? `<span style="color:green;font-weight:bold;">‚Çπ${t.amount}</span>`
      : '';
    const moneyOut = t.type === 'debit'
      ? `<span style="color:red;font-weight:bold;">‚Çπ${t.amount}</span>`
      : '';
    journal.innerHTML += `<tr>
      <td>${t.date}</td>
      <td>${t.account}</td>
      <td style="text-align:right">${moneyIn}</td>
      <td style="text-align:right">${moneyOut}</td>
      <td>${t.note}</td>
      <td>
        <button onclick="editTransaction(${i})">‚úèÔ∏è</button>
        <button onclick="deleteTransaction(${i})" style="background:#dc2626">üóë</button>
      </td>
    </tr>`;
  });
}

function editTransaction(i){
  const t = data[i];
  date.value = t.date;
  account.value = t.account;
  type.value = t.type;
  amount.value = t.amount;
  note.value = t.note;
  editIndex = i;
}

function deleteTransaction(i){
  if(confirm('Delete this transaction?')){
    data.splice(i,1);
    localStorage.setItem('accounts', JSON.stringify(data));
    render();
  }
}

function renderLedger(){
  const map = {};
  filteredData.forEach(t => {
    if(!map[t.account]) map[t.account] = 0;
    map[t.account] += t.type === 'debit' ? t.amount : -t.amount;
  });
  ledger.innerHTML = '<tr><th>Account</th><th>Balance</th></tr>';
  Object.keys(map).forEach(a => {
    ledger.innerHTML += `<tr><td>${a}</td><td>${map[a]}</td></tr>`;
  });
}

function renderReports(){
  let sales = 0, purchase = 0, expense = 0;
  filteredData.forEach(t => {
    if(t.account === 'Sales') sales += t.amount;
    if(t.account === 'Purchase') purchase += t.amount;
    if(t.account === 'Expense') expense += t.amount;
  });

  trading.innerHTML = `Sales: ‚Çπ${sales}<br>Purchase: ‚Çπ${purchase}`;
  const profit = sales - purchase - expense;
  pl.innerHTML = `Expenses: ‚Çπ${expense}<br><b>Net Profit: ‚Çπ${profit}</b>`;

  bs.innerHTML = `Capital + Profit = ‚Çπ${profit}`;
}

render();

</script>

</body>
</html>

