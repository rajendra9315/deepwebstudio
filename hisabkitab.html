<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Simple Money Journal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; padding:20px; }
    h1,h2 { color:#222; }
    .card { background:#fff; padding:16px; border-radius:8px; margin-bottom:20px; box-shadow:0 2px 6px rgba(0,0,0,0.08); }
    input, select, textarea, button { width:100%; padding:8px; margin:6px 0; }
    button { background:#2563eb; color:#fff; border:none; border-radius:6px; cursor:pointer; }
    table { width:100%; border-collapse:collapse; }
    th, td { border:1px solid #ddd; padding:8px; }
    th { background:#f0f0f0; }
    .actions button { width:auto; margin-right:5px }
    .calculator button { width:23%; margin:1% }
  </style>
</head>
<body>

<h1>üìò Simple Money Journal</h1>
<p>Only one system: Money In (üíö Green) & Money Out (‚ù§Ô∏è Red)</p>

<!-- ADD TRANSACTION -->
<div class="card">
  <h2>Add Transaction</h2>
  <input type="date" id="date" />
  <select id="type">
    <option value="in">Money In (Green)</option>
    <option value="out">Money Out (Red)</option>
  </select>
  <input type="number" id="amount" placeholder="Amount" />
  <textarea id="note" placeholder="Note"></textarea>
  <button onclick="saveTransaction()">Save Transaction</button>
</div>

<!-- JOURNAL -->
<div class="card">
  <h2>Journal</h2>
  <table id="journal"></table>
</div>

<!-- CALCULATOR TOGGLE -->
<div class="card">
  <button onclick="toggleCalc()">üßÆ Calculator</button>
</div>

<div class="card calculator" id="calculatorBox" style="display:none">
  <h2>Calculator</h2>
  <input type="text" id="calc" readonly />
  <div>
    <button onclick="press('7')">7</button><button onclick="press('8')">8</button><button onclick="press('9')">9</button><button onclick="press('/')">√∑</button>
    <button onclick="press('4')">4</button><button onclick="press('5')">5</button><button onclick="press('6')">6</button><button onclick="press('*')">√ó</button>
    <button onclick="press('1')">1</button><button onclick="press('2')">2</button><button onclick="press('3')">3</button><button onclick="press('-')">‚àí</button>
    <button onclick="press('0')">0</button><button onclick="press('.')">.</button><button onclick="calculate()">=</button><button onclick="press('+')">+</button>
    <button onclick="clearCalc()" style="background:#6b7280;width:100%">Clear</button>
  </div>
</div>

<script>
let data = JSON.parse(localStorage.getItem('journal')) || [];
let editIndex = null;

function saveTransaction(){
  if(!date.value || !amount.value) return alert('Date & Amount required');

  const tx = {
    date: date.value,
    type: type.value,
    amount: Number(amount.value),
    note: note.value
  };

  if(editIndex !== null){
    data[editIndex] = tx;
    editIndex = null;
  } else {
    data.push(tx);
  }

  localStorage.setItem('journal', JSON.stringify(data));
  date.value = amount.value = note.value = '';
  render();
}

function render(){
  journal.innerHTML = '<tr><th>Date</th><th>Money In</th><th>Money Out</th><th>Note</th><th>Action</th></tr>';
  data.forEach((t,i)=>{
    journal.innerHTML += `<tr>
      <td>${t.date}</td>
      <td style="color:green">${t.type==='in' ? '‚Çπ'+t.amount : ''}</td>
      <td style="color:red">${t.type==='out' ? '‚Çπ'+t.amount : ''}</td>
      <td>${t.note}</td>
      <td class="actions">
        <button onclick="editTx(${i})">‚úèÔ∏è Edit</button>
        <button onclick="deleteTx(${i})" style="background:#dc2626">üóë Delete</button>
      </td>
    </tr>`;
  });
}

function editTx(i){
  const t = data[i];
  editIndex = i;
  date.value = t.date;
  type.value = t.type;
  amount.value = t.amount;
  note.value = t.note;
}

function deleteTx(i){
  if(!confirm('Delete this transaction?')) return;
  data.splice(i,1);
  localStorage.setItem('journal', JSON.stringify(data));
  render();
}

// Calculator
function toggleCalc(){
  calculatorBox.style.display = calculatorBox.style.display==='none'?'block':'none';
}
function press(v){ calc.value += v; }
function calculate(){ try{ calc.value = eval(calc.value); }catch{ calc.value='Error'; } }
function clearCalc(){ calc.value=''; }

render();
</script>
</body>
</html>

